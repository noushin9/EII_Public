//@ui5-bundle docgenerator/Component-preload.js
sap.ui.predefine("docgenerator/Component", ["sap/ui/core/UIComponent","docgenerator/model/models"],(e,t)=>{"use strict";return e.extend("docgenerator.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init(){e.prototype.init.apply(this,arguments);this.setModel(t.createDeviceModel(),"device");this.getRouter().initialize()}})});
sap.ui.predefine("docgenerator/controller/App.controller", ["sap/ui/core/mvc/Controller"],e=>{"use strict";return e.extend("docgenerator.controller.App",{onInit(){}})});
sap.ui.predefine("docgenerator/controller/PrimaryView.controller", ["sap/ui/core/mvc/Controller","sap/ui/model/json/JSONModel","sap/m/ColumnListItem","sap/m/ObjectIdentifier","sap/m/Text","sap/m/VBox","sap/m/FormattedText","sap/m/MessageBox","sap/ui/core/Fragment","sap/m/MessageToast"],function(e,t,n,i,a,r,o,s,l,d){"use strict";return e.extend("docgenerator.controller.PrimaryView",{onInit:function(){this.oView=this.getView();this.oModel=this.getOwnerComponent().getModel();this.aFinalFilters=[];this.counter=0},onFileUpload:function(e){var t=e},onLoadCsvHeaders:function(){debugger;var e=this.getView().byId("csvUploader");var t=e.oFileUpload;var n=t.files[0];if(n){var i=new FileReader;i.onload=function(e){var t=e.target.result;var n=t.split("\n");if(n.length>0){var i=n[0].split(",");var a=i.map(function(e){return{key:e.trim(),text:e.trim()}});var r=new sap.ui.model.json.JSONModel({csvHeaders:a});this.getView().setModel(r,"csv");console.log(a);d.show("CSV headers loaded successfully.")}}.bind(this);i.onerror=function(e){s.error("Error reading file: "+e.target.error.message)}}},onTaxConfigPress:function(){if(!this._oTaxConfigDialog){this._oTaxConfigDialog=sap.ui.xmlfragment("docgenerator.fragments.TaxConfig",this);this.getView().addDependent(this._oTaxConfigDialog)}this._oTaxConfigDialog.open()},onGuidedBuyingPress:function(){var e="docgenerator.fragments.guidedBuying";if(!this._pGuidedBuyingDialog){this._pGuidedBuyingDialog=l.load({name:e,controller:this}).then(function(e){this.getView().addDependent(e);return e}.bind(this)).catch(function(e){console.error("Dialog load error",e);this._pGuidedBuyingDialog=null}.bind(this))}this._pGuidedBuyingDialog.then(function(e){e.open()})},onCloseFieldConfig:function(){var e=this;if(this._pGuidedBuyingDialog){this._pGuidedBuyingDialog.then(function(e){e.close()})}},onFieldConfigPress:function(e){var t=this.getView();var n=this;if(!n._pFieldConfigDialog){n._pFieldConfigDialog=l.load({name:"docgenerator.fragments.FieldConfig",id:t.getId(),controller:this}).then(function(e){t.addDependent(e);return e}).catch(function(e){console.error("FieldConfig fragment load error:",e);d.show("Unable to open Field Configuration (see console).");this._pFieldConfigDialog=null;throw e}.bind(this))}n._pFieldConfigDialog.then(function(e){e.open()}).catch(function(){})},_bindTableToFunction:async function(){var e=this.getView();var t=e.byId("idDocTable");var l=this.getOwnerComponent().getModel();if(!t||!l){s.error("Table or OData V4 model not found.");return}var d="/generate";var c=new n({cells:[new i({title:"{displayName}",text:"{parameterName}"}),new r({items:[new a({text:"{parameterType}"}),new a({text:{parts:[{path:"defaultValue"}],formatter:function(e){return"Default: "+e}}}),new a({text:{parts:[{path:"parameterValue"}],formatter:function(e){return"Value: "+e}}}),new a({text:{parts:[{path:"isDefault"}],formatter:function(e){return e?"Is Default: true":""}}}),new o({htmlText:"{description}"})]})]});var u=await l.bindContext("/generateDocument.generate(...)");await u.invoke();const f=u.getBoundContext()?.getObject();console.log(f);t.bindContext().execute();t.bindItems({path:d,parameters:{operationMode:"Server"},template:c});var g=t.getBinding("items");if(!g){this._fallbackFetchAndBind();return}var p=function(){try{var e=typeof g.getCurrentContexts==="function"?g.getCurrentContexts():[];var t=e&&e.length?e.length:0;if(t===0){g.detachChange(p);this._fallbackFetchAndBind()}else{g.detachChange(p)}}catch(e){g.detachChange(p);this._fallbackFetchAndBind()}}.bind(this);if(typeof g.attachChange==="function"){g.attachChange(p)}else{setTimeout(function(){this._fallbackFetchAndBind()}.bind(this),800)}},onParamNameFilterSelectionFinish:function(e){var t=e.getSource();var n=t.getSelectedItems();var i=n.map(function(e){return e.getKey()});var a=this.getView().byId("idDocTable");var r=a.getBinding("items");if(r){if(i.length>0){var o=i.map(function(e){return new sap.ui.model.Filter("parameterName",sap.ui.model.FilterOperator.EQ,e)});var s=new sap.ui.model.Filter(o,false);r.filter(s)}else{r.filter([])}}},onCustomerEditFilterSelectionFinish:function(e){var t=e.getSource();var n=t.getSelectedItems();var i=n.map(function(e){if(e.getKey()==="true"||e.getKey()===0){return true}else if(e.getKey()==="false"||e.getKey()===1){return false}return e.getKey()});var a=this.getView().byId("idDocTable");var r=a.getBinding("items");if(r){if(i.length>0){var o=i.map(function(e){return new sap.ui.model.Filter("isCustomerEditable",sap.ui.model.FilterOperator.EQ,e);aFinalFilters.push(new sap.ui.model.Filter({filters:o}))});var s=new sap.ui.model.Filter(o,false);r.filter(s)}else{r.filter([])}}},_fallbackFetchAndBind:async function(){var e=this.getView();var i=e.byId("idDocTable");if(!i){s.error("Table not found.");return}var a="isCustomerEditable eq true and (parameterName eq 'Application.Approvable.AllowApprovalOfDeniedApprovable' or parameterName eq 'Application.Approvable.AllowedForExternalApproval' )";var r=await this.oModel.bindContext("/generateDocument.generate(...)");r.invoke().then(async function(n){const a=r.getBoundContext().getObject();var o=new t({items:a.value});e.setModel(o,"docs");i.setBusy(false);var s=this.getView().getModel("docs");var l=s.getProperty("/items")||[];var d={};var c={};var u=l.reduce(function(e,t){var n=t.isCustomerEditable;if(n!==undefined&&!d[n]){d[n]=true;e.push({key:n,text:String(n)})}return e},[]);var f=await l.reduce(function(e,t){var n=t.parameterName;if(n!==undefined&&!c[n]){c[n]=true;e.push({key:n,text:String(n.replace(/\./g," "))})}return e},[]);var g=new sap.ui.model.json.JSONModel({customerEditableOptions:u,parameterNameOptions:f});this.getView().setModel(g,"filter")}.bind(this)).catch(function(a){s.error(a.message||"Failed to call generate function");var r=new t({items:[]});e.setModel(r,"docs");i.unbindItems();i.bindItems({path:"docs>/items",template:new n})}.bind(this))},onGeneratePress:async function(){this.byId("page").setBusy(true);const e={value:{docpayload:{projectName:this.byId("inpProjectName").getValue(),customerName:this.byId("inpCustomerName").getValue(),projectIdentification:[{label:"Project Name",value:this.byId("inpProjectName").getValue()},{label:"Customer Name",value:this.byId("inpCustomerName").getValue()},{label:"SAP Ariba Project Manager",value:this.byId("inpAribaPM").getValue()}],revisionHistory:[{author:this.byId("inpAribaPM").getValue(),version:"0.1",date:"2025-10-07T00:00:00Z",status:"Draft",location:"<Link to document>"}],businessProcessOverview:`This Project ${this.byId("inpProjectName").getValue()?this.byId("inpProjectName").getValue():"<Project Name>"} covers configuration between ${this.byId("inpCustomerName").getValue()?this.byId("inpCustomerName").getValue():"<Customer Name>"}  and SAP Ariba services...`,functionalOverview:`High-level description of the solution components...`,alternativesConsidered:`- Option A: ...\n- Option B: ...`,businessBenefit:`Expected cost savings and automated ordering...`,assumptions:`Customer provides X data; network access available.`,relationshipToOtherDocumentation:"See Leading Practice Functional Design Document for core details.",functionalDesign:"Detailed design of the RICEFWD objects, mapping, API calls...",constraints:["No changes to S/4 master data","Ariba API rate limits are 1000 calls/min"],tasksBySapAriba:[{task:"Develop connector",description:"Build and test the Ariba connector.",dependency:"Customer test data"}],tasksByCustomer:[],tasksByPartner:[],csvGuidedBuyingParameters:[],sapEditableParameters:[],customerEditableParameters:[]}}};this.counter++;var t="/generateDocument.combinedDocGenerate(...)";var n=await this.oModel.bindContext(t);Object.entries(e).forEach(([e,t])=>{n.setParameter(e,t)});await n.invoke();if(n.getBoundContext().getObject()){const e=n.getBoundContext().getObject();const t=this._bufferDownload(e);d.show("Document generated successfully.");this.byId("page").setBusy(false)}else{s.error("Document generation failed.");this.byId("page").setBusy(false)}let i="Ariba Config Document.docx"},_bufferDownload:async function(e,t=`Project Functional Specification Document_V${this.counter}.docx`,n="application/vnd.openxmlformats-officedocument.wordprocessingml.document"){{if(!e||!e.buffer){if(e&&e.fileMessage){s.information(e.fileMessage);this.byId("page").setBusy(false);return}else{throw new Error("No buffer found in payload")}}const i=e.buffer;let a;if(i instanceof ArrayBuffer){a=new Uint8Array(i);console.log(a)}else if(ArrayBuffer.isView(i)){a=new Uint8Array(i.buffer||i);console.log(a)}else if(i&&i.type==="Buffer"&&Array.isArray(i.data)){a=new Uint8Array(i.data);console.log(a)}else if(Array.isArray(i)){a=new Uint8Array(i);console.log(a)}else if(typeof i==="string"){const e=i.indexOf("base64,")>=0?i.split("base64,")[1]:i;const t=atob(e);const n=t.length;a=new Uint8Array(n);for(let e=0;e<n;e++){a[e]=t.charCodeAt(e)}}else if(i&&(i.data instanceof ArrayBuffer||Array.isArray(i.data)||ArrayBuffer.isView(i.data))){const e=i.data;if(e instanceof ArrayBuffer)a=new Uint8Array(e);else if(ArrayBuffer.isView(e))a=new Uint8Array(e.buffer);else a=new Uint8Array(e)}else{throw new Error("Unsupported buffer format: "+Object.prototype.toString.call(i))}const r=new Blob([a],{type:n});const o=URL.createObjectURL(r);const l=document.createElement("a");l.href=o;l.download=t;document.body.appendChild(l);l.click();this.byId("page").setBusy(false);l.remove();URL.revokeObjectURL(o)}}})});
sap.ui.predefine("docgenerator/model/models", ["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
sap.ui.require.preload({
	"docgenerator/i18n/i18n.properties":'# App / page\nappTitle=Document Generator\ntitle=Documents\ngenerateButton=Generate\nguidedbuyingButton=Guided Buying\nfieldconfigButton=Field Configuration\nreceivingToleranceButton=Receiving Tolerance\nOtherThresholdsButton=Other Thresholds\napprovalFlowButton=Approval Flow\ntaxConfigurationButton=Tax Configuration\n\n# Toolbar / buttons / tooltips\nsettingsTooltip=Open settings\n\n# Filter labels\nCustomerEditable=Customer Editable\nparameterName=Parameter Name\n\n# Table column headers\nDisplayName=Display Name\nParameterType=Parameter Type\nDefaultValue=Default Value\nParameterValue=Parameter Value\nCustomerEditableHeader=Customer Editable\n\n# Table no-data / messages (optional)\ntableNoData=No documents to display.\ntableGrowingMore=Load more\n\n# Other / descriptive text (optional)\ndescription=Description\nisDefaultText=Is Default: true\n\n# Accessibility / aria (optional)\nariaFilterBar=Filter Bar\nariaGenerateButton=Generate selected documents\n',
	"docgenerator/manifest.json":'{"_version":"1.76.0","sap.cloud":{"public":true,"service":"docgenerator.service"},"sap.app":{"id":"docgenerator","type":"application","i18n":{"bundleUrl":"i18n/i18n.properties","supportedLocales":[""]},"applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.18.7","toolsId":"f2f43da3-2c67-4cf0-932f-102e38ac76be"},"dataSources":{"mainService":{"uri":"/odata/v4/generate-document/","type":"OData","settings":{"annotations":[],"odataVersion":"4.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.140.0","libs":{"sap.m":{},"sap.ui.core":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"docgenerator.i18n.i18n","supportedLocales":[""]}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","controlAggregation":"pages","controlId":"app","transition":"slide","type":"View","viewType":"XML","path":"docgenerator.view","async":true},"routes":[{"name":"RoutePrimaryView","pattern":":?query:","target":["TargetPrimaryView"]}],"targets":{"TargetPrimaryView":{"id":"PrimaryView","name":"PrimaryView"}}},"rootView":{"viewName":"docgenerator.view.App","type":"XML","id":"App","async":true}}}',
	"docgenerator/view/App.view.xml":'<mvc:View controllerName="docgenerator.controller.App"\n    displayBlock="true"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"><App id="app"></App></mvc:View>',
	"docgenerator/view/PrimaryView.view.xml":'<mvc:View\n    xmlns:uxap="sap.uxap"\n    xmlns:smartform="sap.ui.comp.smartform"\n    xmlns:unified="sap.ui.unified"\n    xmlns:smartvariants="sap.ui.comp.smartvariants"\n    xmlns:f="sap.f"\n    xmlns:filterbar="sap.ui.comp.filterbar"\n    xmlns:smartfilterbar="sap.ui.comp.smartfilterbar"\n    controllerName="docgenerator.controller.PrimaryView"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:layout="sap.ui.layout"\n><f:DynamicPage\n        id="page"\n        title="{i18n>appTitle}"\n        headerExpanded="true"\n        \n    ><f:title><f:DynamicPageTitle><f:heading><Title\n                        id="pageTitle"\n                        text="{i18n>appTitle}"\n                    /></f:heading><f:actions><Button\n                        text="{i18n>generateButton}"\n                        press="onGeneratePress"\n                        class="sapUiSmallMarginEnd"\n                        icon="sap-icon://ai"\n                    /></f:actions></f:DynamicPageTitle></f:title><f:content><VBox\n                class="sapUiSmallMargin"\n                fitContainer="true"\n                renderType="Bare"\n            ><Panel headerText="1. Project Information"><layout:Grid\n                        defaultSpan="L6 M6 S12"\n                        class="sapUiSmallMargin"\n                    ><layout:content><Label text="Project Name" /><Input\n                                id="inpProjectName"\n                                placeholder="Enter Project Name"\n                            /><Label text="Customer Name" /><Input\n                                id="inpCustomerName"\n                                placeholder="Enter Customer Name"\n                            /><Label text="Customer Project ID" /><Input\n                                id="inpCustomerProject"\n                                placeholder="Enter Customer Project ID"\n                            /><Label text="SAP Ariba Solution" /><Input\n                                id="inpAribaSolution"\n                                placeholder="e.g. Ariba Services â€“ Buy Channel"\n                            /><Label text="SAP Ariba PM" /><Input\n                                id="inpAribaPM"\n                                placeholder="Project Manager Name"\n                            /><Label text="Customer PM" /><Input\n                                id="inpCustomerPM"\n                                placeholder="Customer Project Manager"\n                            /><Label text="User Story" /><TextArea\n                                id="inpUserStory"\n                                rows="3"\n                                width="100%"\n                                placeholder="Enter user story description"\n                            /><Label text="Realm" /><MultiComboBox\n                                id="inpRealm"\n                                selectionFinish=".onSelectRealmMulti"\n                            ><core:Item\n                                    key="BBX"\n                                    text="brainboxdsapp-t"\n                                /></MultiComboBox></layout:content></layout:Grid></Panel><Panel\n                    headerText="3.Ariba Config Table"\n                    visible="false"\n                    id="configTablePanel"\n                ><filterbar:FilterBar\n                        id="idsFilterBar"\n                        search="onFilterSearch"\n                        useToolbar="true"\n                        showRestoreButton="true"\n                    ><filterbar:filterGroupItems><filterbar:FilterGroupItem\n                                groupName="G1"\n                                name="isCustomerEditable"\n                                label="{i18n>CustomerEditable}"\n                                visibleInFilterBar="true"\n                            ><filterbar:control><MultiComboBox\n                                        id="isCustomerEditable"\n                                        items="{filter>/customerEditableOptions}"\n                                        selectionFinish="onCustomerEditFilterSelectionFinish"\n                                    ><core:Item\n                                            key="{filter>key}"\n                                            text="{filter>text}"\n                                        /></MultiComboBox></filterbar:control></filterbar:FilterGroupItem><filterbar:FilterGroupItem\n                                groupName="G2"\n                                name="parameterName"\n                                label="{i18n>parameterName}"\n                                visibleInFilterBar="true"\n                            ><filterbar:control><MultiComboBox\n                                        id="parameterName"\n                                        items="{filter>/parameterNameOptions}"\n                                        selectionFinish="onParamNameFilterSelectionFinish"\n                                    ><core:Item\n                                            key="{filter>key}"\n                                            text="{filter>text}"\n                                        /></MultiComboBox></filterbar:control></filterbar:FilterGroupItem></filterbar:filterGroupItems></filterbar:FilterBar><VBox fitContainer="true"><OverflowToolbar style="Clear"><Title\n                                id="docTitle"\n                                text="{i18n>title}"\n                            /><ToolbarSpacer /><Button\n                                text="{i18n>generateButton}"\n                                press="onGeneratePress"\n                                class="sapUiSmallMarginEnd"\n                                icon="sap-icon://ai"\n                            /></OverflowToolbar><Table\n                            id="idDocTable"\n                            items="{docs>/items}"\n                            inset="false"\n                            growing="true"\n                            growingThreshold="10"\n                            mode="MultiSelect"\n                            bindingContexts="/generate(...)"\n                        ><columns><Column><Text text="{i18n>DisplayName}" /></Column><Column><Text text="{i18n>ParameterType}" /></Column><Column><Text text="{i18n>DefaultValue}" /></Column><Column><Text text="{i18n>ParameterValue}" /></Column><Column><Text text="{i18n>CustomerEditable}" /></Column></columns><items><ColumnListItem><cells><ObjectIdentifier\n                                            title="{= ${docs>displayName} ? ${docs>displayName} : ${docs>parameterName}}"\n                                            text="{docs>parameterName}"\n                                            titleActive="true"\n                                        /><Text text="{docs>parameterType}" /><Text text="{docs>defaultValue}" /><Text text="{docs>parameterValue}" /><Text\n                                            text="{docs>isCustomerEditable}"\n                                        /></cells></ColumnListItem></items></Table></VBox></Panel></VBox></f:content></f:DynamicPage></mvc:View>\n'
});
//# sourceMappingURL=Component-preload.js.map
